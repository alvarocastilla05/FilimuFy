<div class="container-fluid mt-3">

  <!--PARTE SUPERIOR -------------------->
  <div class="row p-4 fondoCubierto" 
    [ngStyle]="{'background-image' : 'linear-gradient(to bottom, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.65)), url(' + (pelicula!.backdrop_path | imagen) + ')'}">

    <!--PARTE SUPERIOR IZQUIERDA-->
    <div class="w-25">
      <img src="{{pelicula!.poster_path | imagen}}" width="25%" class="rounded-4 card-img-top" alt="{{pelicula!.title}}">
    </div>

    <!--PARTE SUPERIOR DERECHA-->
    <div class="container w-75 mb-3 p-4">

      <!--Título y año de estreno-->
      <h1 class="mb-4 jockeyOne text-white">{{pelicula!.title}} 
        <span class="gris">({{pelicula!.release_date | date:'yyyy'}})</span>
      </h1>
      <!--PEGI y Géneros-->
      <div class="container w-100 px-3 d-flex align-items-center">
        <h3 class="m-0 me-4 p-2 rounded-3 freeman text-white" 
          [style]="getCertification() | edadFondoColor" [innerHTML]="getCertification()"></h3>
        <h4 class="m-0 freeman gris">
          @if(pelicula!.genres.length != 0){
            <span *ngFor="let genre of pelicula!.genres; let i = index">{{ genre.name }}
              <span *ngIf="i < pelicula!.genres.length - 1">/ </span>
            </span>
          }@else {
            Géneros sin especificar
          }
        </h4>
      </div>
      <!--Duración, Valoración y Status-->
      <div class="d-flex">
        <h4 class="m-0 poppins text-white p-3 me-3">Duración: {{pelicula!.runtime | horasMin}}</h4>
        <h4 class="m-0 poppins text-white p-3 me-3">
          <i class="bi bi-star-fill text-warning"></i> {{pelicula!.vote_average |number:'1.0-1' }} /10
        </h4>
        <h4 class="m-0 poppins text-white p-3">
          <i class="bi bi-circle-fill tamanhoCirculo" [style]="pelicula!.status | statusColor"></i> {{pelicula!.status}}
        </h4>
      </div>
      
      <!--Proveedores-->
      @if((listaProveedores && listaProveedores.length > 0) || (listaProveedoresPago && listaProveedoresPago.length > 0)) {
        <div class="container d-flex m-0 freeman gris ps-3 mt-2 mb-3">
          <div *ngFor="let proveedor of listaProveedores">
            <img [ngClass]="'rounded-4 mx-2'" [style.width]="75 + 'px'" [src]="proveedor.logo_path | imagen" [alt]="proveedor.provider_name">
          </div>
          <div *ngFor="let proveedor of listaProveedoresPago">
            <img [ngClass]="'rounded-4 mx-2'" [style.width]="75 + 'px'" [src]="proveedor.logo_path | imagen" [alt]="proveedor.provider_name">
          </div>
        </div>
      } @else {
        <!--No hace nada-->
      }

      <!--Descripción-->
      @if(pelicula!.overview !== ''){
        <h5 class="poppins text-white p-3">{{pelicula!.overview}}</h5>
      }@else {
        <h5 class="poppins text-white p-3">Sinopsis no disponible.</h5>
      }
      <!--Tráiler-->
      <div class="p-3 pt-2" *ngIf="selectedVideo">
        <a type="button" class="btn d-inline-flex fondoRosa p-2 pe-3 rounded-3 d-flex align-items-center justify-content-center"
          [href]="'https://www.youtube.com/embed/' + selectedVideo.key">
          <h5 class="m-0 freeman text-white align-middle d-flex align-items-center">
            <i class="bi bi-play-fill tamanhoPlay"></i>&nbsp;Reproducir tráiler
          </h5>
        </a>
      </div>

    </div>
  </div>

  <!--PARTE INFERIOR -------------------->
  <div class="container-fluid d-flex mt-4 pb-5">

    <!--Reparto principal-->
    <div class="container w-75">
      <h2 class="m-0 jockeyOne azulOscuro">Reparto Principal</h2>
  
      <div class="container mt-2"><!--Esto es el scroll, NO TOCAR-->
        <div class="row d-flex flex-nowrap mt-1" style="
          overflow: auto; 
          white-space: nowrap; 
          display: flex;
          overflow-x: scroll;
          overscroll-behavior-x: contain;
          scroll-snap-type: x proximity; 
          margin: 50px auto 0;">
          <!-- ¡PENDIENTE DE CAMBIAR CUANDO SE INCLUYA EL CARD COMPONENT DE ACTORES! -->
          @for (actor of listaCreditos; track actor) {
            <div class="col-md-3 col-12 p-2 my-3">
              <div class="p-2" style="width: 15rem;">
                <a [routerLink]="['/actores', actor.id]" class="text-decoration-none text-black"> <!--PENDIENTE DE RELLENAR-->
                  @if(actor.profile_path != null) {
                    <img src="{{actor.profile_path! | imagen}}" class="rounded-4 card-img-top sombra" [alt]="actor.name">
                  } @else {
                    <img [src]="placeholderFoto" class="rounded-4 card-img-top sombra" height="336px" [alt]="actor.name">
                  }
                    <div class="card-body px-0 pt-2">
                        <h5 class="card-title freeman text-start pt-2 m-0 puntosSuspensivos">{{actor.name}}</h5>
                        <p class="card-text gris freeman m-0 puntosSuspensivos">{{actor.character}}</p>
                    </div>
                </a>
              </div>
            </div>
          }
        </div>
      </div>
    </div>

    <!--Datos de la película-->
    <div class="container w-25 degradado rounded-5 p-4 h-25 mt-2">
      <div class="mb-4">
        <h4 class="jockeyOne text-black">Título original:</h4>
        @if(pelicula!.original_title !== ''){
          <h5 class="freeman text-white">{{pelicula!.original_title}}</h5>
        }@else {
          <h5 class="freeman text-white">-</h5>
        }
      </div>
      <div class="mb-4">
        <h4 class="jockeyOne text-black">Idioma original:</h4>
        @if(pelicula!.spoken_languages.length != 0){
          <h5 class="freeman text-white">{{pelicula!.spoken_languages[0].english_name}}</h5>
        }@else {
          <h5 class="freeman text-white">-</h5>
        }
      </div>
      <div class="mb-4">
        <h4 class="jockeyOne text-black">Presupuesto:</h4>
        @if(pelicula!.budget != null){
          <h5 class="freeman text-white">{{pelicula!.budget | currency: 'USD'}}</h5>
        }@else {
          <h5 class="freeman text-white">-</h5>
        }
      </div>
      <div class="mb-4">
        <h4 class="jockeyOne text-black">Ingresos:</h4>
        @if(pelicula!.revenue != null){
          <h5 class="freeman text-white">{{pelicula!.revenue | currency: 'USD'}}</h5>
        }@else {
          <h5 class="freeman text-white">-</h5>
        }
      </div>
      <div>
        <h4 class="jockeyOne text-black">Palabras clave:</h4>
        <div class="d-flex flex-wrap">
          @if(keywords.length != 0){
            <div *ngFor="let keyword of keywords;">
              <a class="palabraClave text-decoration-none">
                <h6 [ngClass]="'fondoNegro py-2 px-3 me-2 rounded-3 text-white'">{{keyword.name}}</h6>
              </a>
            </div>
          }@else {
            <h5 class="freeman text-white">No se han añadido palabras clave.</h5>
          }
        <div>
      </div>
    </div>
  </div>

</div>